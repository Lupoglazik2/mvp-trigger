{"ast":null,"code":"import React,{useEffect,useMemo,useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function stepIcon(text){const t=(text||'').toLowerCase();if(t.includes('–∑–∞–ø—É—Å—Ç–∏–ª —Ü–µ–ø–æ—á–∫—É'))return'üöÄ';if(t.includes('–∂–¥–∞–ª'))return'‚è≥';if(t.includes('–æ—Ç–ø—Ä–∞–≤–∏–ª –ø–∏—Å—å–º–æ'))return'‚úâÔ∏è';if(t.includes('–ø–∏—Å—å–º–æ –±—ã–ª–æ –æ—Ç–∫—Ä—ã—Ç–æ')||t.includes('–ø–∏—Å—å–º–æ –Ω–µ –±—ã–ª–æ –æ—Ç–∫—Ä—ã—Ç–æ'))return'üëÅÔ∏è';if(t.includes('–ø–∏—Å—å–º–æ –±—ã–ª–æ –∫–ª–∏–∫–Ω—É—Ç–æ')||t.includes('–ø–∏—Å—å–º–æ –Ω–µ –±—ã–ª–æ –∫–ª–∏–∫–Ω—É—Ç–æ'))return'üëÜ';if(t.includes('–¥–∞—Ç–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç')||t.includes('–≤—Ä–µ–º—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç'))return'‚úÖ';if(t.includes('—Ü–µ–ø–æ—á–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞'))return'üõë';return'‚û°Ô∏è';}export default function SimulationModal(_ref){let{open,steps,userMessages,onClose}=_ref;console.log('SimulationModal received:',{open,steps,userMessages});const safeSteps=useMemo(()=>Array.isArray(steps)?steps:[],[steps]);const safeUserMessages=useMemo(()=>Array.isArray(userMessages)?userMessages:[],[userMessages]);console.log('SimulationModal processed:',{safeSteps,safeUserMessages});const[index,setIndex]=useState(0);useEffect(()=>{if(!open)return;setIndex(0);},[open]);useEffect(()=>{if(!open)return;if(index>=safeUserMessages.length-1)return;const id=setTimeout(()=>setIndex(i=>Math.min(i+1,safeUserMessages.length-1)),900);return()=>clearTimeout(id);},[index,open,safeUserMessages.length]);if(!open)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"ui-modal-overlay\",onClick:onClose,children:/*#__PURE__*/_jsxs(\"div\",{className:\"ui-modal\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"ui-modal-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"ui-title\",style:{fontSize:20},children:\"\\u0421\\u0438\\u043C\\u0443\\u043B\\u044F\\u0446\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"button\",{className:\"ui-button\",onClick:onClose,children:\"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"ui-modal-stage\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:10,fontSize:12,color:'#666'},children:[\"Debug: userMessages length = \",safeUserMessages.length]}),safeUserMessages.slice(0,index+1).map((msg,i)=>/*#__PURE__*/_jsxs(\"div\",{className:\"ui-step\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"ui-step-icon\",children:stepIcon(msg)}),/*#__PURE__*/_jsx(\"span\",{className:\"ui-step-text\",children:msg})]},i)),safeUserMessages.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"ui-step\",children:\"\\u041D\\u0435\\u0442 \\u0448\\u0430\\u0433\\u043E\\u0432\"})]})]})});}","map":{"version":3,"names":["React","useEffect","useMemo","useState","jsx","_jsx","jsxs","_jsxs","stepIcon","text","t","toLowerCase","includes","SimulationModal","_ref","open","steps","userMessages","onClose","console","log","safeSteps","Array","isArray","safeUserMessages","index","setIndex","length","id","setTimeout","i","Math","min","clearTimeout","className","onClick","children","e","stopPropagation","style","fontSize","marginBottom","color","slice","map","msg"],"sources":["/Users/irina/mvp-trigger/frontend/src/components/SimulationModal.js"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\n\nfunction stepIcon(text) {\n  const t = (text || '').toLowerCase();\n  if (t.includes('–∑–∞–ø—É—Å—Ç–∏–ª —Ü–µ–ø–æ—á–∫—É')) return 'üöÄ';\n  if (t.includes('–∂–¥–∞–ª')) return '‚è≥';\n  if (t.includes('–æ—Ç–ø—Ä–∞–≤–∏–ª –ø–∏—Å—å–º–æ')) return '‚úâÔ∏è';\n  if (t.includes('–ø–∏—Å—å–º–æ –±—ã–ª–æ –æ—Ç–∫—Ä—ã—Ç–æ') || t.includes('–ø–∏—Å—å–º–æ –Ω–µ –±—ã–ª–æ –æ—Ç–∫—Ä—ã—Ç–æ')) return 'üëÅÔ∏è';\n  if (t.includes('–ø–∏—Å—å–º–æ –±—ã–ª–æ –∫–ª–∏–∫–Ω—É—Ç–æ') || t.includes('–ø–∏—Å—å–º–æ –Ω–µ –±—ã–ª–æ –∫–ª–∏–∫–Ω—É—Ç–æ')) return 'üëÜ';\n  if (t.includes('–¥–∞—Ç–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç') || t.includes('–≤—Ä–µ–º—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç')) return '‚úÖ';\n  if (t.includes('—Ü–µ–ø–æ—á–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞')) return 'üõë';\n  return '‚û°Ô∏è';\n}\n\nexport default function SimulationModal({ open, steps, userMessages, onClose }) {\n  console.log('SimulationModal received:', { open, steps, userMessages });\n  const safeSteps = useMemo(() => Array.isArray(steps) ? steps : [], [steps]);\n  const safeUserMessages = useMemo(() => Array.isArray(userMessages) ? userMessages : [], [userMessages]);\n  console.log('SimulationModal processed:', { safeSteps, safeUserMessages });\n  const [index, setIndex] = useState(0);\n\n  useEffect(() => {\n    if (!open) return;\n    setIndex(0);\n  }, [open]);\n\n  useEffect(() => {\n    if (!open) return;\n    if (index >= safeUserMessages.length - 1) return;\n    const id = setTimeout(() => setIndex((i) => Math.min(i + 1, safeUserMessages.length - 1)), 900);\n    return () => clearTimeout(id);\n  }, [index, open, safeUserMessages.length]);\n\n  if (!open) return null;\n\n  return (\n    <div className=\"ui-modal-overlay\" onClick={onClose}>\n      <div className=\"ui-modal\" onClick={(e) => e.stopPropagation()}>\n        <div className=\"ui-modal-header\">\n          <div className=\"ui-title\" style={{ fontSize: 20 }}>–°–∏–º—É–ª—è—Ü–∏—è</div>\n          <button className=\"ui-button\" onClick={onClose}>–ó–∞–∫—Ä—ã—Ç—å</button>\n        </div>\n        <div className=\"ui-modal-stage\">\n          <div style={{ marginBottom: 10, fontSize: 12, color: '#666' }}>\n            Debug: userMessages length = {safeUserMessages.length}\n          </div>\n          {safeUserMessages.slice(0, index + 1).map((msg, i) => (\n            <div key={i} className=\"ui-step\">\n              <span className=\"ui-step-icon\">{stepIcon(msg)}</span>\n              <span className=\"ui-step-text\">{msg}</span>\n            </div>\n          ))}\n          {safeUserMessages.length === 0 && (\n            <div className=\"ui-step\">–ù–µ—Ç —à–∞–≥–æ–≤</div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}