{"ast":null,"code":"var _jsxFileName = \"/Users/irina/mvp-trigger/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport ReactFlow, { addEdge, Background, Controls, MiniMap, useEdgesState, useNodesState, Handle, Position } from 'reactflow';\nimport NodeInspector from './components/NodeInspector';\nimport { saveChain, loadChain, simulate } from './api';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst initialNodes = [{\n  id: 'event1',\n  type: 'event',\n  position: {\n    x: 0,\n    y: 0\n  },\n  data: {\n    label: 'Contact Added',\n    eventType: 'contact_added',\n    listName: 'Newsletter'\n  }\n}, {\n  id: 'action1',\n  type: 'action',\n  position: {\n    x: 250,\n    y: 0\n  },\n  data: {\n    label: 'Wait 1 day',\n    actionType: 'wait',\n    delayValue: 1,\n    delayUnit: 'days'\n  }\n}, {\n  id: 'cond1',\n  type: 'condition',\n  position: {\n    x: 500,\n    y: -100\n  },\n  data: {\n    label: 'Date > 2025-08-20',\n    conditionType: 'date',\n    operator: '>',\n    value: '2025-08-20'\n  }\n}, {\n  id: 'action2',\n  type: 'action',\n  position: {\n    x: 750,\n    y: -150\n  },\n  data: {\n    label: 'Send Email',\n    actionType: 'send_email',\n    subject: 'Hello!',\n    body: 'Welcome to our list.'\n  }\n}, {\n  id: 'stop1',\n  type: 'action',\n  position: {\n    x: 1000,\n    y: -150\n  },\n  data: {\n    label: 'Stop',\n    actionType: 'stop'\n  }\n}, {\n  id: 'stop2',\n  type: 'action',\n  position: {\n    x: 750,\n    y: 0\n  },\n  data: {\n    label: 'Stop',\n    actionType: 'stop'\n  }\n}];\nconst initialEdges = [{\n  id: 'e1-2',\n  source: 'event1',\n  target: 'action1'\n}, {\n  id: 'e2-3',\n  source: 'action1',\n  target: 'cond1'\n}, {\n  id: 'e3-4',\n  source: 'cond1',\n  target: 'action2',\n  label: 'yes',\n  data: {\n    path: 'yes'\n  }\n}, {\n  id: 'e4-5',\n  source: 'action2',\n  target: 'stop1'\n}, {\n  id: 'e3-6',\n  source: 'cond1',\n  target: 'stop2',\n  label: 'no',\n  data: {\n    path: 'no'\n  }\n}];\nfunction nodeStyleForType(nodeType) {\n  if (nodeType === 'event') return {\n    borderColor: '#0ea5e9',\n    background: '#e0f2fe'\n  };\n  if (nodeType === 'condition') return {\n    borderColor: '#f59e0b',\n    background: '#fff7ed'\n  };\n  return {\n    borderColor: '#10b981',\n    background: '#ecfdf5'\n  };\n}\nfunction DefaultNode({\n  data,\n  nodeType\n}) {\n  const style = nodeStyleForType(nodeType);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: 8,\n      border: '1px solid ' + style.borderColor,\n      background: style.background,\n      borderRadius: 6,\n      minWidth: 140,\n      textAlign: 'center',\n      fontSize: 12\n    },\n    children: [/*#__PURE__*/_jsxDEV(Handle, {\n      type: \"target\",\n      position: Position.Left\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        fontWeight: 600\n      },\n      children: (data === null || data === void 0 ? void 0 : data.label) || nodeType\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: '#666',\n        marginTop: 4\n      },\n      children: [nodeType === 'event' && ((data === null || data === void 0 ? void 0 : data.eventType) || ''), nodeType === 'action' && ((data === null || data === void 0 ? void 0 : data.actionType) || ''), nodeType === 'condition' && ((data === null || data === void 0 ? void 0 : data.conditionType) || '')]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), nodeType === 'condition' ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Handle, {\n        type: \"source\",\n        id: \"yes\",\n        position: Position.Right,\n        style: {\n          top: '30%'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Handle, {\n        type: \"source\",\n        id: \"no\",\n        position: Position.Right,\n        style: {\n          top: '70%'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(Handle, {\n      type: \"source\",\n      position: Position.Right\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n}\n_c = DefaultNode;\nexport default function App() {\n  _s();\n  const [nodes, setNodes, onNodesChange] = useNodesState(initialNodes);\n  const [edges, setEdges, onEdgesChange] = useEdgesState(initialEdges);\n  const [selected, setSelected] = useState(null);\n  const [logs, setLogs] = useState([]);\n  const [now, setNow] = useState(() => new Date().toISOString());\n  const [contextInputs, setContextInputs] = useState({\n    emailOpened: false,\n    emailClicked: false\n  });\n  const nodeTypes = useMemo(() => ({\n    event: props => /*#__PURE__*/_jsxDEV(DefaultNode, {\n      ...props,\n      nodeType: \"event\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 23\n    }, this),\n    action: props => /*#__PURE__*/_jsxDEV(DefaultNode, {\n      ...props,\n      nodeType: \"action\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 24\n    }, this),\n    condition: props => /*#__PURE__*/_jsxDEV(DefaultNode, {\n      ...props,\n      nodeType: \"condition\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 27\n    }, this)\n  }), []);\n  const onConnect = useCallback(params => {\n    setEdges(eds => {\n      const sourceNode = nodes.find(n => n.id === params.source);\n      const newEdge = {\n        ...params,\n        id: `e-${Math.random().toString(36).slice(2, 8)}`\n      };\n      if ((sourceNode === null || sourceNode === void 0 ? void 0 : sourceNode.type) === 'condition') {\n        const path = params.sourceHandle === 'yes' ? 'yes' : 'no';\n        newEdge.data = {\n          ...(newEdge.data || {}),\n          path\n        };\n        newEdge.label = path;\n      }\n      return addEdge(newEdge, eds);\n    });\n  }, [setEdges, nodes]);\n  const onNodeClick = useCallback((_e, node) => {\n    setSelected(node);\n  }, []);\n  const onNodeUpdate = updatedNode => {\n    setNodes(nds => nds.map(n => n.id === updatedNode.id ? updatedNode : n));\n    setSelected(updatedNode);\n  };\n  const addNode = type => {\n    const id = `${type}-${Math.random().toString(36).slice(2, 7)}`;\n    const base = {\n      id,\n      type,\n      position: {\n        x: 50,\n        y: 200\n      },\n      data: {\n        label: type\n      }\n    };\n    if (type === 'event') base.data = {\n      ...base.data,\n      eventType: 'contact_added'\n    };\n    if (type === 'action') base.data = {\n      ...base.data,\n      actionType: 'wait',\n      delayValue: 1,\n      delayUnit: 'days'\n    };\n    if (type === 'condition') base.data = {\n      ...base.data,\n      conditionType: 'date',\n      operator: '>',\n      value: ''\n    };\n    setNodes(nds => nds.concat(base));\n  };\n  const handleSave = async () => {\n    await saveChain({\n      nodes,\n      edges\n    });\n    alert('Saved');\n  };\n  const handleLoad = async () => {\n    const chain = await loadChain();\n    if (chain) {\n      setNodes(chain.nodes);\n      setEdges(chain.edges);\n      setSelected(null);\n    } else {\n      alert('No saved chain found');\n    }\n  };\n  const handleSimulate = async () => {\n    var _result$context;\n    const trigger = {\n      type: 'contact_added',\n      payload: {\n        listName: 'Newsletter',\n        email: 'user@example.com'\n      }\n    };\n    const result = await simulate({\n      nodes,\n      edges\n    }, trigger, {\n      now,\n      ...contextInputs\n    });\n    setLogs(result.logs || []);\n    if ((_result$context = result.context) !== null && _result$context !== void 0 && _result$context.now) setNow(result.context.now);\n  };\n  useEffect(() => {\n    // Ensure a clean selection if node removed\n    if (selected && !nodes.find(n => n.id === selected.id)) {\n      setSelected(null);\n    }\n  }, [nodes, selected]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: 'flex',\n      height: '100vh',\n      width: '100vw'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ui-panel\",\n      style: {\n        width: 280\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ui-panel-header\",\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"ui-title\",\n          children: \"Email Chain Builder\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ui-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ui-row\",\n          style: {\n            marginBottom: 8\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"ui-button\",\n            onClick: () => addNode('event'),\n            children: \"+ Event\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"ui-button\",\n            onClick: () => addNode('action'),\n            children: \"+ Action\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"ui-button\",\n            onClick: () => addNode('condition'),\n            children: \"+ Condition\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ui-row\",\n          style: {\n            marginBottom: 8\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"ui-button\",\n            onClick: handleSave,\n            children: \"Save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"ui-button\",\n            onClick: handleLoad,\n            children: \"Load\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ui-field\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'space-between'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontWeight: 600\n              },\n              children: \"Simulation Context\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"ui-badge\",\n              children: \"local\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ui-field\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"ui-label\",\n            children: \"Current Time (ISO)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"ui-input\",\n            value: now,\n            onChange: e => setNow(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ui-row\",\n          style: {\n            marginBottom: 12\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"ui-label\",\n            style: {\n              display: 'flex',\n              gap: 6,\n              alignItems: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              checked: contextInputs.emailOpened,\n              onChange: e => setContextInputs(c => ({\n                ...c,\n                emailOpened: e.target.checked\n              }))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 204,\n              columnNumber: 15\n            }, this), \" Email Opened\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"ui-label\",\n            style: {\n              display: 'flex',\n              gap: 6,\n              alignItems: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              checked: contextInputs.emailClicked,\n              onChange: e => setContextInputs(c => ({\n                ...c,\n                emailClicked: e.target.checked\n              }))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 15\n            }, this), \" Clicked\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"ui-button ui-button-primary\",\n          onClick: handleSimulate,\n          style: {\n            width: '100%',\n            marginBottom: 12\n          },\n          children: \"Simulate\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ui-field\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontWeight: 600,\n              marginBottom: 4\n            },\n            children: \"Logs\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ui-logs\",\n            children: (logs || []).map((l, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontFamily: 'ui-monospace, SFMono-Regular, Menlo, monospace',\n                fontSize: 12,\n                marginBottom: 4\n              },\n              children: l\n            }, i, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        flex: 1,\n        display: 'flex'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 1\n        },\n        children: /*#__PURE__*/_jsxDEV(ReactFlow, {\n          nodes: nodes,\n          edges: edges,\n          onNodesChange: onNodesChange,\n          onEdgesChange: onEdgesChange,\n          onConnect: onConnect,\n          onNodeClick: onNodeClick,\n          nodeTypes: nodeTypes,\n          fitView: true,\n          children: [/*#__PURE__*/_jsxDEV(MiniMap, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Controls, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Background, {\n            gap: 12,\n            size: 1\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ui-panel ui-panel-right\",\n        style: {\n          width: 340\n        },\n        children: /*#__PURE__*/_jsxDEV(NodeInspector, {\n          node: selected,\n          onChange: onNodeUpdate\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 175,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"HTnJWAeV+4LsJHX1waIf9/JSGoo=\", false, function () {\n  return [useNodesState, useEdgesState];\n});\n_c2 = App;\nvar _c, _c2;\n$RefreshReg$(_c, \"DefaultNode\");\n$RefreshReg$(_c2, \"App\");","map":{"version":3,"names":["React","useCallback","useEffect","useMemo","useState","ReactFlow","addEdge","Background","Controls","MiniMap","useEdgesState","useNodesState","Handle","Position","NodeInspector","saveChain","loadChain","simulate","jsxDEV","_jsxDEV","Fragment","_Fragment","initialNodes","id","type","position","x","y","data","label","eventType","listName","actionType","delayValue","delayUnit","conditionType","operator","value","subject","body","initialEdges","source","target","path","nodeStyleForType","nodeType","borderColor","background","DefaultNode","style","padding","border","borderRadius","minWidth","textAlign","fontSize","children","Left","fileName","_jsxFileName","lineNumber","columnNumber","fontWeight","color","marginTop","Right","top","_c","App","_s","nodes","setNodes","onNodesChange","edges","setEdges","onEdgesChange","selected","setSelected","logs","setLogs","now","setNow","Date","toISOString","contextInputs","setContextInputs","emailOpened","emailClicked","nodeTypes","event","props","action","condition","onConnect","params","eds","sourceNode","find","n","newEdge","Math","random","toString","slice","sourceHandle","onNodeClick","_e","node","onNodeUpdate","updatedNode","nds","map","addNode","base","concat","handleSave","alert","handleLoad","chain","handleSimulate","_result$context","trigger","payload","email","result","context","display","height","width","className","marginBottom","onClick","alignItems","justifyContent","onChange","e","gap","checked","c","l","i","fontFamily","flex","fitView","size","_c2","$RefreshReg$"],"sources":["/Users/irina/mvp-trigger/frontend/src/App.js"],"sourcesContent":["import React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport ReactFlow, {\n  addEdge,\n  Background,\n  Controls,\n  MiniMap,\n  useEdgesState,\n  useNodesState,\n  Handle,\n  Position,\n} from 'reactflow';\nimport NodeInspector from './components/NodeInspector';\nimport { saveChain, loadChain, simulate } from './api';\n\nconst initialNodes = [\n  {\n    id: 'event1',\n    type: 'event',\n    position: { x: 0, y: 0 },\n    data: { label: 'Contact Added', eventType: 'contact_added', listName: 'Newsletter' },\n  },\n  {\n    id: 'action1',\n    type: 'action',\n    position: { x: 250, y: 0 },\n    data: { label: 'Wait 1 day', actionType: 'wait', delayValue: 1, delayUnit: 'days' },\n  },\n  {\n    id: 'cond1',\n    type: 'condition',\n    position: { x: 500, y: -100 },\n    data: { label: 'Date > 2025-08-20', conditionType: 'date', operator: '>', value: '2025-08-20' },\n  },\n  {\n    id: 'action2',\n    type: 'action',\n    position: { x: 750, y: -150 },\n    data: { label: 'Send Email', actionType: 'send_email', subject: 'Hello!', body: 'Welcome to our list.' },\n  },\n  {\n    id: 'stop1',\n    type: 'action',\n    position: { x: 1000, y: -150 },\n    data: { label: 'Stop', actionType: 'stop' },\n  },\n  {\n    id: 'stop2',\n    type: 'action',\n    position: { x: 750, y: 0 },\n    data: { label: 'Stop', actionType: 'stop' },\n  },\n];\n\nconst initialEdges = [\n  { id: 'e1-2', source: 'event1', target: 'action1' },\n  { id: 'e2-3', source: 'action1', target: 'cond1' },\n  { id: 'e3-4', source: 'cond1', target: 'action2', label: 'yes', data: { path: 'yes' } },\n  { id: 'e4-5', source: 'action2', target: 'stop1' },\n  { id: 'e3-6', source: 'cond1', target: 'stop2', label: 'no', data: { path: 'no' } },\n];\n\nfunction nodeStyleForType(nodeType) {\n  if (nodeType === 'event') return { borderColor: '#0ea5e9', background: '#e0f2fe' };\n  if (nodeType === 'condition') return { borderColor: '#f59e0b', background: '#fff7ed' };\n  return { borderColor: '#10b981', background: '#ecfdf5' };\n}\n\nfunction DefaultNode({ data, nodeType }) {\n  const style = nodeStyleForType(nodeType);\n  return (\n    <div style={{\n      padding: 8,\n      border: '1px solid ' + style.borderColor,\n      background: style.background,\n      borderRadius: 6,\n      minWidth: 140,\n      textAlign: 'center',\n      fontSize: 12,\n    }}>\n      <Handle type=\"target\" position={Position.Left} />\n      <div style={{ fontWeight: 600 }}>{data?.label || nodeType}</div>\n      <div style={{ color: '#666', marginTop: 4 }}>\n        {nodeType === 'event' && (data?.eventType || '')}\n        {nodeType === 'action' && (data?.actionType || '')}\n        {nodeType === 'condition' && (data?.conditionType || '')}\n      </div>\n      {nodeType === 'condition' ? (\n        <>\n          <Handle type=\"source\" id=\"yes\" position={Position.Right} style={{ top: '30%' }} />\n          <Handle type=\"source\" id=\"no\" position={Position.Right} style={{ top: '70%' }} />\n        </>\n      ) : (\n        <Handle type=\"source\" position={Position.Right} />\n      )}\n    </div>\n  );\n}\n\nexport default function App() {\n  const [nodes, setNodes, onNodesChange] = useNodesState(initialNodes);\n  const [edges, setEdges, onEdgesChange] = useEdgesState(initialEdges);\n  const [selected, setSelected] = useState(null);\n  const [logs, setLogs] = useState([]);\n  const [now, setNow] = useState(() => new Date().toISOString());\n  const [contextInputs, setContextInputs] = useState({ emailOpened: false, emailClicked: false });\n\n  const nodeTypes = useMemo(() => ({\n    event: (props) => <DefaultNode {...props} nodeType=\"event\" />,\n    action: (props) => <DefaultNode {...props} nodeType=\"action\" />,\n    condition: (props) => <DefaultNode {...props} nodeType=\"condition\" />,\n  }), []);\n\n  const onConnect = useCallback((params) => {\n    setEdges((eds) => {\n      const sourceNode = nodes.find((n) => n.id === params.source);\n      const newEdge = { ...params, id: `e-${Math.random().toString(36).slice(2, 8)}` };\n      if (sourceNode?.type === 'condition') {\n        const path = params.sourceHandle === 'yes' ? 'yes' : 'no';\n        newEdge.data = { ...(newEdge.data || {}), path };\n        newEdge.label = path;\n      }\n      return addEdge(newEdge, eds);\n    });\n  }, [setEdges, nodes]);\n\n  const onNodeClick = useCallback((_e, node) => {\n    setSelected(node);\n  }, []);\n\n  const onNodeUpdate = (updatedNode) => {\n    setNodes((nds) => nds.map((n) => (n.id === updatedNode.id ? updatedNode : n)));\n    setSelected(updatedNode);\n  };\n\n  const addNode = (type) => {\n    const id = `${type}-${Math.random().toString(36).slice(2, 7)}`;\n    const base = { id, type, position: { x: 50, y: 200 }, data: { label: type } };\n    if (type === 'event') base.data = { ...base.data, eventType: 'contact_added' };\n    if (type === 'action') base.data = { ...base.data, actionType: 'wait', delayValue: 1, delayUnit: 'days' };\n    if (type === 'condition') base.data = { ...base.data, conditionType: 'date', operator: '>', value: '' };\n    setNodes((nds) => nds.concat(base));\n  };\n\n  const handleSave = async () => {\n    await saveChain({ nodes, edges });\n    alert('Saved');\n  };\n\n  const handleLoad = async () => {\n    const chain = await loadChain();\n    if (chain) {\n      setNodes(chain.nodes);\n      setEdges(chain.edges);\n      setSelected(null);\n    } else {\n      alert('No saved chain found');\n    }\n  };\n\n  const handleSimulate = async () => {\n    const trigger = { type: 'contact_added', payload: { listName: 'Newsletter', email: 'user@example.com' } };\n    const result = await simulate({ nodes, edges }, trigger, { now, ...contextInputs });\n    setLogs(result.logs || []);\n    if (result.context?.now) setNow(result.context.now);\n  };\n\n  useEffect(() => {\n    // Ensure a clean selection if node removed\n    if (selected && !nodes.find((n) => n.id === selected.id)) {\n      setSelected(null);\n    }\n  }, [nodes, selected]);\n\n  return (\n    <div style={{ display: 'flex', height: '100vh', width: '100vw' }}>\n      <div className=\"ui-panel\" style={{ width: 280 }}>\n        <div className=\"ui-panel-header\">\n          <h2 className=\"ui-title\">Email Chain Builder</h2>\n        </div>\n        <div className=\"ui-section\">\n          <div className=\"ui-row\" style={{ marginBottom: 8 }}>\n            <button className=\"ui-button\" onClick={() => addNode('event')}>+ Event</button>\n            <button className=\"ui-button\" onClick={() => addNode('action')}>+ Action</button>\n            <button className=\"ui-button\" onClick={() => addNode('condition')}>+ Condition</button>\n          </div>\n\n          <div className=\"ui-row\" style={{ marginBottom: 8 }}>\n            <button className=\"ui-button\" onClick={handleSave}>Save</button>\n            <button className=\"ui-button\" onClick={handleLoad}>Load</button>\n          </div>\n\n          <div className=\"ui-field\">\n            <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\n              <div style={{ fontWeight: 600 }}>Simulation Context</div>\n              <span className=\"ui-badge\">local</span>\n            </div>\n          </div>\n          <div className=\"ui-field\">\n            <label className=\"ui-label\">Current Time (ISO)</label>\n            <input className=\"ui-input\" value={now} onChange={(e) => setNow(e.target.value)} />\n          </div>\n          <div className=\"ui-row\" style={{ marginBottom: 12 }}>\n            <label className=\"ui-label\" style={{ display: 'flex', gap: 6, alignItems: 'center' }}>\n              <input\n                type=\"checkbox\"\n                checked={contextInputs.emailOpened}\n                onChange={(e) => setContextInputs((c) => ({ ...c, emailOpened: e.target.checked }))}\n              /> Email Opened\n            </label>\n            <label className=\"ui-label\" style={{ display: 'flex', gap: 6, alignItems: 'center' }}>\n              <input\n                type=\"checkbox\"\n                checked={contextInputs.emailClicked}\n                onChange={(e) => setContextInputs((c) => ({ ...c, emailClicked: e.target.checked }))}\n              /> Clicked\n            </label>\n          </div>\n\n          <button className=\"ui-button ui-button-primary\" onClick={handleSimulate} style={{ width: '100%', marginBottom: 12 }}>Simulate</button>\n\n          <div className=\"ui-field\">\n            <div style={{ fontWeight: 600, marginBottom: 4 }}>Logs</div>\n            <div className=\"ui-logs\">\n              {(logs || []).map((l, i) => (\n                <div key={i} style={{ fontFamily: 'ui-monospace, SFMono-Regular, Menlo, monospace', fontSize: 12, marginBottom: 4 }}>\n                  {l}\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div style={{ flex: 1, display: 'flex' }}>\n        <div style={{ flex: 1 }}>\n          <ReactFlow\n            nodes={nodes}\n            edges={edges}\n            onNodesChange={onNodesChange}\n            onEdgesChange={onEdgesChange}\n            onConnect={onConnect}\n            onNodeClick={onNodeClick}\n            nodeTypes={nodeTypes}\n            fitView\n          >\n            <MiniMap />\n            <Controls />\n            <Background gap={12} size={1} />\n          </ReactFlow>\n        </div>\n        <div className=\"ui-panel ui-panel-right\" style={{ width: 340 }}>\n          <NodeInspector node={selected} onChange={onNodeUpdate} />\n        </div>\n      </div>\n    </div>\n  );\n}\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}